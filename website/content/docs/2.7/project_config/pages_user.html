

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Publish static web content &mdash; software-factory  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="software-factory  documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> software-factory
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../main_components.html">Main components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">The Config repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operator/index.html">Operator documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributor/index.html">Contributor documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">software-factory</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Publish static web content</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/project_config/pages_user.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This role isn’t compatible with zuulv3</p>
</div>
<div class="section" id="publish-static-web-content">
<span id="pages-user"></span><h1>Publish static web content<a class="headerlink" href="#publish-static-web-content" title="Permalink to this headline">¶</a></h1>
<p>See <a class="reference internal" href="../operator/pages_operator.html#pages-operator"><span class="std std-ref">Pages service for hosting static web content</span></a> for
more informations about the service.</p>
<div class="section" id="create-the-source-repository">
<h2>Create the source repository<a class="headerlink" href="#create-the-source-repository" title="Permalink to this headline">¶</a></h2>
<p>Software Factory detects publication repositories named <em>&lt;name&gt;.&lt;sfdomain&gt;</em> and
handles them as special repositories that contain content to be published.</p>
<p>For example, let’s assume the Sofware Factory instance you are using is accessible
via the hostname <em>sftests.com</em> and you want to host content at <em>myproject.sftests.com</em>;
then simply create the repository <em>myproject.sftests.com</em>. The repository’s name determines
whether it is a publication repository and its URL.</p>
<p>Please refer to this <a class="reference internal" href="resources_user.html#resources-user"><span class="std std-ref">section</span></a> for instructions on creating
repositories.</p>
</div>
<div class="section" id="publish-content">
<h2>Publish content<a class="headerlink" href="#publish-content" title="Permalink to this headline">¶</a></h2>
<p>The Git repository can be populated with raw content or pelican (<a class="reference external" href="https://blog.getpelican.com">https://blog.getpelican.com</a>) sources.</p>
<p>Behind the scene Software Factory attaches two CI jobs to publication repositories:</p>
<blockquote>
<div><ul class="simple">
<li>pages-render (triggered by the check and gate pipelines)</li>
<li>pages-update (triggered by the post pipeline)</li>
</ul>
</div></blockquote>
<p>The <em>pages-render</em> job detects the content type and runs some content check.
Actually only pelican content is checked. The source is processed
by the job thus any mistakes detected by pelican will generate a
negative feedback note on the code review service.</p>
<p>Both jobs detect pelican content by testing if the file <em>pelicanconf.py</em>
exists at the root of the repository.</p>
<p>The <em>pages-update</em> job renders content if needed (for pelican content) and publishes it.
It runs in the <em>post</em> pipeline meaning that the run occurs once the code is merged
in the Git repository.</p>
<p>As soon as the code is merged and the job is finished then the content is accessible
under <em>http(s)://&lt;repo-name&gt;</em>.</p>
</div>
<div class="section" id="hostname-resolution">
<h2>Hostname resolution<a class="headerlink" href="#hostname-resolution" title="Permalink to this headline">¶</a></h2>
<p>The Software Factory instance’s domain DNS configuration must be configured with a wildcard
for all subdomains to be redirected to the Software Factory gateway IP.
If you run a Software Factory in a test environment you might not have
a real DNS entry configured then you should setup your local resolver.</p>
<p>For exemple adding in /etc/hosts:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;&lt;SF IP&gt; &lt;repo-name&gt;&quot;</span> <span class="p">|</span> sudo tee -a /etc/hosts
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Red Hat.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>